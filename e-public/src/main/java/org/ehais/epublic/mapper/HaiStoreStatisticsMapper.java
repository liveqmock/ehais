package org.ehais.epublic.mapper;

import java.util.List;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Result;
import org.apache.ibatis.annotations.ResultMap;
import org.apache.ibatis.annotations.Results;
import org.apache.ibatis.annotations.Select;
import org.ehais.epublic.model.HaiStoreStatistics;
import org.ehais.epublic.model.HaiStoreStatisticsExample;
import org.ehais.epublic.model.OrderStoreStatistics;

public interface HaiStoreStatisticsMapper {
	
	
	@Select("select store_id,"+
			" sum(case when pay_name='微信支付' then order_amount end) as weixin_amount, "+
			" sum(case when pay_name='现金支付' then order_amount end) as cash_amount, "+
			" count(case when pay_name='微信支付' then order_id end) as weixin_quantity, "+
			" count(case when pay_name='现金支付' then order_id end) as cash_quantity, "+
			" DATE_FORMAT(FROM_UNIXTIME(pay_time),'%Y-%m-%d') as pay_time "+
			" from hai_order_info where store_id = #{store_id} and order_status = 1 " + 
			" and DATE_FORMAT(FROM_UNIXTIME(pay_time),'%Y-%m-%d') >= #{start_time} and DATE_FORMAT(FROM_UNIXTIME(pay_time),'%Y-%m-%d') <= #{end_time} " + 
			" GROUP BY store_id, DATE_FORMAT(FROM_UNIXTIME(pay_time),'%Y-%m-%d')")
	@Results(value = {
			@Result(property="storeId", column="store_id"),
			@Result(property="weixinAmount", column="weixin_amount"),
			@Result(property="cashAmount", column="cash_amount"),
			@Result(property="weixinQuantity", column="weixin_quantity"),
			@Result(property="cashQuantity", column="cash_quantity"),
			@Result(property="statisticsDate", column="pay_time")
	})
	List<HaiStoreStatistics> order_store_statistics(
			@Param("store_id") Integer store_id,
			@Param("start_time") String start_time,
			@Param("end_time") String end_time
			);
	
	
    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    @Select("select count(*) from hai_store_statistics where #{field} = #{value} ")
    int unique(@Param("field") String field, @Param("value") String value);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    @Select("select count(*) from hai_store_statistics where #{field} = #{value} and store_id = #{store_id}")
    int uniqueStore(@Param("field") String field, @Param("value") String value, @Param("store_id") Integer store_id);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    long countByExample(HaiStoreStatisticsExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int deleteByExample(HaiStoreStatisticsExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int deleteByPrimaryKey(Integer storeId);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int insert(HaiStoreStatistics record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int insertSelective(HaiStoreStatistics record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    List<HaiStoreStatistics> selectByExample(HaiStoreStatisticsExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    HaiStoreStatistics selectByPrimaryKey(Integer storeId);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int updateByExampleSelective(@Param("record") HaiStoreStatistics record, @Param("example") HaiStoreStatisticsExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int updateByExample(@Param("record") HaiStoreStatistics record, @Param("example") HaiStoreStatisticsExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int updateByPrimaryKeySelective(HaiStoreStatistics record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table hai_store_statistics
     *
     * @mbg.generated Wed Sep 20 13:04:46 CST 2017
     */
    int updateByPrimaryKey(HaiStoreStatistics record);
}